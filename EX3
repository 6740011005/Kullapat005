<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic To-Do List (Intermediate)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .completed { text-decoration: line-through; color: #94a3b8; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

    <div class="bg-white w-full max-w-md rounded-2xl shadow-xl p-6">
        <h1 class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2">
            üìù ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥
        </h1>

        <div class="flex gap-2 mb-6">
            <input type="text" id="todoInput" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà..." 
                class="flex-1 border border-slate-200 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-blue-500 transition">
            <button id="addBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition">
                ‡πÄ‡∏û‡∏¥‡πà‡∏°
            </button>
        </div>

        <ul id="todoList" class="space-y-3">
            </ul>
    </div>

    <script>
        // 1. ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á Element
        const todoInput = document.getElementById('todoInput');
        const addBtn = document.getElementById('addBtn');
        const todoList = document.getElementById('todoList');

        // 2. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å LocalStorage ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        let todos = JSON.parse(localStorage.getItem('myTodos')) || [];

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏≤‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Render)
        function renderTodos() {
            todoList.innerHTML = '';
            todos.forEach((todo, index) => {
                const li = document.createElement('li');
                li.className = "flex items-center justify-between bg-slate-50 p-3 rounded-xl border border-slate-100 animate-fadeIn";
                
                li.innerHTML = `
                    <div class="flex items-center gap-3">
                        <input type="checkbox" ${todo.completed ? 'checked' : ''} 
                            onchange="toggleTodo(${index})"
                            class="w-5 h-5 cursor-pointer accent-blue-600">
                        <span class="${todo.completed ? 'completed' : ''} text-slate-700 font-medium">
                            ${todo.text}
                        </span>
                    </div>
                    <button onclick="deleteTodo(${index})" class="text-red-400 hover:text-red-600 p-1 transition">
                        üóëÔ∏è
                    </button>
                `;
                todoList.appendChild(li);
            });
            saveToLocalStorage();
        }

        // 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        function addTodo() {
            const text = todoInput.value.trim();
            if (text !== '') {
                todos.push({ text: text, completed: false });
                todoInput.value = '';
                renderTodos();
            }
        }

        // 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô/‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à)
        window.toggleTodo = (index) => {
            todos[index].completed = !todos[index].completed;
            renderTodos();
        };

        // 5. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        window.deleteTodo = (index) => {
            todos.splice(index, 1);
            renderTodos();
        };

        // 6. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á LocalStorage
        function saveToLocalStorage() {
            localStorage.setItem('myTodos', JSON.stringify(todos));
        }

        // Event Listeners
        addBtn.addEventListener('click', addTodo);
        
        // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Enter
        todoInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addTodo();
        });

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
        renderTodos();
    </script>
</body>
</html>
